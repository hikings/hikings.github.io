var bszCaller,bszTag;!function(){var t,e,n,a=!1,i=[];ready=function(t){return a||"interactive"===document.readyState||"complete"===document.readyState?t.call(document):i.push(function(){return t.call(this)}),this},e=function(){for(var t=0,e=i.length;e>t;t++)i[t].apply(document);i=[]},n=function(){a||(a=!0,e.call(window),document.removeEventListener?document.removeEventListener("DOMContentLoaded",n,!1):document.attachEvent&&(document.detachEvent("onreadystatechange",n),window==window.top&&(clearInterval(t),t=null)))},document.addEventListener?document.addEventListener("DOMContentLoaded",n,!1):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){/loaded|complete/.test(document.readyState)&&n()}),window==window.top&&(t=setInterval(function(){try{a||document.documentElement.doScroll("left")}catch(t){return}n()},5)))}(),(bszCaller={fetch:function(t,e){var n="BusuanziCallback_"+Math.floor(1099511627776*Math.random());window[n]=this.evalCall(e),t=t.replace("=BusuanziCallback","="+n),scriptTag=document.createElement("SCRIPT"),scriptTag.type="text/javascript",scriptTag.defer=!0,scriptTag.src=t,document.getElementsByTagName("HEAD")[0].appendChild(scriptTag)},evalCall:function(t){return function(e){ready(function(){try{t(e),scriptTag.parentElement.removeChild(scriptTag)}catch(t){bszTag.hides()}})}}}).fetch("//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback",function(t){bszTag.texts(t),bszTag.shows()}),bszTag={bszs:["site_pv","page_pv","site_uv"],texts:function(t){this.bszs.map(function(e){var n=document.getElementById("busuanzi_value_"+e);n&&(n.innerHTML=t[e])})},hides:function(){this.bszs.map(function(t){var e=document.getElementById("busuanzi_container_"+t);e&&(e.style.display="none")})},shows:function(){this.bszs.map(function(t){var e=document.getElementById("busuanzi_container_"+t);e&&(e.style.display="inline")})}},function(){function t(t){if(c)t(c);else{var e=new XMLHttpRequest;e.open("GET",g,!0),e.onload=function(){if(this.status>=200&&this.status<300){var e=JSON.parse(this.response);c=e instanceof Array?e:e.posts,t(c)}else console.error(this.statusText)},e.onerror=function(){console.error(this.statusText)},e.send()}}function e(t,e){return t.replace(/\{\w+\}/g,function(t){var n=t.replace(/\{|\}/g,"");return e[n]||""})}function n(t){var n="";n=t.length?t.map(function(t){return e(v,{title:t.title,path:(o.BLOG.ROOT+"/"+t.path).replace(/\/{2,}/g,"/"),date:new Date(t.date).toLocaleDateString(),tags:t.tags.map(function(t){return"<span>#"+t.name+"</span>"}).join("")})}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',m.innerHTML=n}function a(t,e){return e.lastIndex=0,e.test(t)}function i(t,e){return a(t.title,e)||t.tags.some(function(t){return a(t.name,e)})||a(t.text,e)}function s(e){var a=this.value.trim();if(a){var s=new RegExp(a.replace(/[ ]/g,"|"),"gmi");t(function(t){n(t.filter(function(t){return i(t,s)})),b.show()}),e.preventDefault()}}var c,o=window||this,r=o.BLOG.even,u=o.BLOG.$,l=u("#search"),d=u("#search-wrap"),f=u("#key"),p=u("#back"),h=u("#search-panel"),m=u("#search-result"),v=u("#search-tpl").innerHTML,g=(o.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/"),L=(o.BLOG.noop,u("html")),b={show:function(){o.innerWidth<760&&L.classList.add("lock-size"),h.classList.add("in")},hide:function(){o.innerWidth<760&&L.classList.remove("lock-size"),h.classList.remove("in")}};l.addEventListener(r,function(){d.classList.toggle("in"),f.value="",d.classList.contains("in")?f.focus():f.blur()}),p.addEventListener(r,function(){d.classList.remove("in"),b.hide()}),document.addEventListener(r,function(t){"key"!==t.target.id&&"click"===r&&b.hide()}),f.addEventListener("input",s),f.addEventListener(r,s)}.call(this);